<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê°•ì•„ì§€ ìœ¡ì„± ê²Œì„</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }
    body {
      margin: 0;
      padding: 0;
      background: #fdf6ec;
      overflow: hidden;
    }
    #gameContainer {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    #startScreen, #breedSelectScreen, #nameInputScreen, #gameScreen, #albumScreen {
      position: absolute;
      width: 100%;
      height: 100%;
      background: #fdf6ec;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    #startScreen h1 {
      font-size: 3rem;
      margin-bottom: 20px;
    }
    .btn {
      background-color: #ffce54;
      border: none;
      border-radius: 10px;
      padding: 15px 30px;
      font-size: 1.2rem;
      cursor: pointer;
      margin: 10px;
      transition: background-color 0.3s;
    }
    .btn:hover {
      background-color: #ffda77;
    }
    #gameScreen {
      display: none;
      flex-direction: column;
      align-items: center;
    }
    #dogImage {
      width: 240px;
      height: 240px;
      margin: 10px;
    }
    #statusPanel, #eventPanel, #interactionPanel {
      margin-top: 10px;
      padding: 10px;
      background-color: #fffbe6;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 80%;
      text-align: center;
    }
    #eventPanel {
      font-size: 1.1rem;
      font-weight: bold;
      min-height: 80px;
    }
    #interactionPanel button {
      margin: 5px;
    }
    #albumScreen {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #fffbe6;
    }
    #albumScreen h2 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <audio id="bgm" src="https://dessa95.github.io/puppy-game-drive/bgm.mp3" autoplay loop></audio>

    <div id="startScreen">
      <h1>ğŸ¶ ê°•ì•„ì§€ ìœ¡ì„± ê²Œì„</h1>
      <button class="btn" onclick="showBreedSelect()">ê²Œì„ ì‹œì‘</button>
    </div>

    <div id="breedSelectScreen" style="display:none;">
      <h2>ê°•ì•„ì§€ í’ˆì¢…ì„ ì„ íƒí•˜ì„¸ìš”</h2>
      <button class="btn" onclick="selectBreed('bichon')">ë¹„ìˆ‘ í”„ë¦¬ì œ</button>
      <button class="btn" onclick="selectBreed('golden')">ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„</button>
    </div>

    <div id="nameInputScreen" style="display:none;">
      <h2>ê°•ì•„ì§€ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</h2>
      <input type="text" id="dogNameInput" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
      <button class="btn" onclick="startGame()">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
    </div>
    <div id="gameScreen">
      <div id="statusPanel">
        <h3 id="dogInfo">ì´ë¦„: - / ë‚˜ì´: 0ì‚´</h3>
        <div>ê¸°ë¶„: <span id="mood">ğŸ˜Š</span></div>
        <div>ì„±ì¥ ë‹¨ê³„: <span id="growthStage">ì‹ ìƒì•„ê¸°</span></div>
      </div>

      <img id="dogImage" src="" alt="ê°•ì•„ì§€ ì´ë¯¸ì§€" />

      <div id="eventPanel"></div>

      <div id="interactionPanel">
        <button class="btn" onclick="triggerEvent('pet')">ğŸ¾ ì“°ë‹¤ë“¬ê¸°</button>
        <button class="btn" onclick="triggerEvent('feed')">ğŸ– ê°„ì‹ì£¼ê¸°</button>
        <button class="btn" onclick="triggerEvent('walk')">ğŸš¶ ì‚°ì±…í•˜ê¸°</button>
      </div>
    </div>

    <div id="albumScreen">
      <h2 id="albumMessage">ğŸ‰ OOì´ê°€ ì˜ˆì˜ê³  ë©‹ì§€ê²Œ ìëì–´ìš”!</h2>
      <img id="finalDogImage" src="" alt="ê°•ì•„ì§€ ì„±ì¥ ì™„ë£Œ ì´ë¯¸ì§€" />
      <button class="btn" onclick="location.reload()">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>

  <script>
    const dogImages = {
      bichon: {
        baby: "https://dessa95.github.io/puppy-game-drive/b1.png",
        teen: "https://dessa95.github.io/puppy-game-drive/b2.png",
        adult: "https://dessa95.github.io/puppy-game-drive/b3.png",
        old: "https://dessa95.github.io/puppy-game-drive/b4.png"
      },
      golden: {
        baby: "https://dessa95.github.io/puppy-game-drive/g1.png",
        teen: "https://dessa95.github.io/puppy-game-drive/g2.png",
        adult: "https://dessa95.github.io/puppy-game-drive/g3.png",
        old: "https://dessa95.github.io/puppy-game-drive/g4.png"
      }
    };

    let selectedBreed = "";
    let dogName = "";
    let age = 0;
    let mood = 5; // ê¸°ë³¸ê°’: 5 / 0~10
    let growthStage = "ì‹ ìƒì•„ê¸°";
    let ageTimer = null;
    let eventTimer = null;
    let inEvent = false;

    function showBreedSelect() {
      document.getElementById("startScreen").style.display = "none";
      document.getElementById("breedSelectScreen").style.display = "flex";
    }

    function selectBreed(breed) {
      selectedBreed = breed;
      document.getElementById("breedSelectScreen").style.display = "none";
      document.getElementById("nameInputScreen").style.display = "flex";
    }

    function startGame() {
      dogName = document.getElementById("dogNameInput").value.trim();
      if (!dogName) {
        alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      document.getElementById("nameInputScreen").style.display = "none";
      document.getElementById("gameScreen").style.display = "flex";
      updateDogInfo();
      updateDogImage();

      ageTimer = setInterval(() => {
        age++;
        updateDogInfo();
        updateGrowthStage();
      }, 20000); // 20ì´ˆë§ˆë‹¤ 1ì‚´ ì¦ê°€

      startEventLoop();
    }

    function updateDogInfo() {
      document.getElementById("dogInfo").textContent = `ì´ë¦„: ${dogName} / ë‚˜ì´: ${age}ì‚´`;
    }

    function updateDogImage() {
      let stage = getStageKey();
      document.getElementById("dogImage").src = dogImages[selectedBreed][stage];
    }

    function getStageKey() {
      if (age < 2) return "baby";
      if (age < 6) return "teen";
      if (age < 10) return "adult";
      return "old";
    }

    function updateGrowthStage() {
      const stage = getStageKey();
      let label = "";
      switch (stage) {
        case "baby": label = "ì‹ ìƒì•„ê¸°"; break;
        case "teen": label = "ì²­ì†Œë…„ê¸°"; break;
        case "adult": label = "ì„±ë…„ê¸°"; break;
        case "old":
          label = "ë…¸ë ¹ê¸°";
          setTimeout(() => endGame(), 60000); // ë…¸ë ¹ê¸° ì§„ì… í›„ 1ë¶„ í›„ ì¢…ë£Œ
          break;
      }
      growthStage = label;
      document.getElementById("growthStage").textContent = growthStage;
      updateDogImage();
      showStageEffect(label);
    }
<audio id="bgm" src="https://dessa95.github.io/puppy-game-drive/bgm.mp3" autoplay loop></audio>

<script>
  const dogImages = {
    bichon: {
      baby: "https://dessa95.github.io/puppy-game-drive/b1.png",
      teen: "https://dessa95.github.io/puppy-game-drive/b2.png",
      adult: "https://dessa95.github.io/puppy-game-drive/b3.png",
      old: "https://dessa95.github.io/puppy-game-drive/b4.png"
    },
    golden: {
      baby: "https://dessa95.github.io/puppy-game-drive/g1.png",
      teen: "https://dessa95.github.io/puppy-game-drive/g2.png",
      adult: "https://dessa95.github.io/puppy-game-drive/g3.png",
      old: "https://dessa95.github.io/puppy-game-drive/g4.png"
    }
  };

  let selectedBreed = "";
  let dogName = "";
  let age = 0;
  let mood = 5;
  let growthStage = "ì‹ ìƒì•„ê¸°";
  let ageTimer = null;
  let eventTimer = null;
  let inEvent = false;

  function showBreedSelect() {
    document.getElementById("startScreen").style.display = "none";
    document.getElementById("breedSelectScreen").style.display = "flex";
  }

  function selectBreed(breed) {
    selectedBreed = breed;
    document.getElementById("breedSelectScreen").style.display = "none";
    document.getElementById("nameInputScreen").style.display = "flex";
  }

  function startGame() {
    dogName = document.getElementById("dogNameInput").value.trim();
    if (!dogName) {
      alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
      return;
    }

    document.getElementById("nameInputScreen").style.display = "none";
    document.getElementById("gameScreen").style.display = "flex";
    updateDogInfo();
    updateDogImage();

    ageTimer = setInterval(() => {
      age++;
      updateDogInfo();
      updateGrowthStage();
    }, 20000); // 20ì´ˆë§ˆë‹¤ ë‚˜ì´ 1ì‚´ ì¦ê°€

    startEventLoop();
  }

  function updateDogInfo() {
    document.getElementById("dogInfo").textContent = `ì´ë¦„: ${dogName} / ë‚˜ì´: ${age}ì‚´`;
  }

  function updateDogImage() {
    let stage = getStageKey();
    document.getElementById("dogImage").src = dogImages[selectedBreed][stage];
  }

  function getStageKey() {
    if (age < 2) return "baby";
    if (age < 6) return "teen";
    if (age < 10) return "adult";
    return "old";
  }

  function updateGrowthStage() {
    const stage = getStageKey();
    let label = "";
    switch (stage) {
      case "baby": label = "ì‹ ìƒì•„ê¸°"; break;
      case "teen": label = "ì²­ì†Œë…„ê¸°"; break;
      case "adult": label = "ì„±ë…„ê¸°"; break;
      case "old":
        label = "ë…¸ë ¹ê¸°";
        setTimeout(() => endGame(), 60000); // ë…¸ë ¹ê¸° ì§„ì… í›„ 1ë¶„ ë’¤ ì¢…ë£Œ
        break;
    }
    growthStage = label;
    document.getElementById("growthStage").textContent = growthStage;
    updateDogImage();
    showStageEffect(label);
  }

  function showStageEffect(label) {
    const panel = document.getElementById("eventPanel");
    panel.innerHTML = `ğŸ‰ ${label}ë¡œ ì„±ì¥í–ˆì–´ìš”!`;
    panel.style.animation = "pulse 1s ease";
    setTimeout(() => {
      panel.innerHTML = "";
      panel.style.animation = "";
    }, 2000);
  }
  function startEventLoop() {
    eventTimer = setInterval(() => {
      if (!inEvent) {
        triggerRandomEvent();
      }
    }, 5000); // 5ì´ˆë§ˆë‹¤ ëœë¤ ì´ë²¤íŠ¸ ì²´í¬
  }

  function triggerRandomEvent() {
    inEvent = true;
    clearInterval(ageTimer); // ì´ë²¤íŠ¸ ì¤‘ ë‚˜ì´ ì¦ê°€ ì¼ì‹œ ì¤‘ì§€

    const events = [
      {
        text: "ê°•ì•„ì§€ê°€ ì¡¸ë¦° ëˆˆìœ¼ë¡œ ë„ ë°”ë¼ë´ìš”. ì¬ì›Œì¤„ê¹Œìš”?",
        options: ["ì¬ì›Œì¤€ë‹¤", "ê·¸ëƒ¥ ë‘”ë‹¤"],
        effects: [1, -1]
      },
      {
        text: "ê°•ì•„ì§€ê°€ ì¥ë‚œê°ì„ ê°–ê³  ì™€ìš”. ë†€ì•„ì¤„ê¹Œìš”?",
        options: ["ê°™ì´ ë…¼ë‹¤", "ë¬´ì‹œí•œë‹¤"],
        effects: [2, -2]
      },
      {
        text: "ì‚°ì±…ì„ ê°€ìê³  ì§–ê³  ìˆì–´ìš”!",
        options: ["ë°”ë¡œ ë‚˜ê°„ë‹¤", "í”¼ê³¤í•˜ë‹¤ê³  í•œë‹¤"],
        effects: [2, -2]
      },
      {
        text: "ë°¥ê·¸ë¦‡ì„ ë°œë¡œ íˆ­ ì³ìš”. ë°°ê°€ ê³ í”ˆê°€ë´ìš”!",
        options: ["ë°¥ì„ ì¤€ë‹¤", "ë¬´ì‹œí•œë‹¤"],
        effects: [1, -1]
      },
      {
        text: "ìš°ìš¸í•œ í‘œì •ìœ¼ë¡œ ë‹¹ì‹ ì„ ì³ë‹¤ë´ìš”...",
        options: ["ì•ˆì•„ì¤€ë‹¤", "ë¬´ì‹œí•œë‹¤"],
        effects: [2, -2]
      }
    ];

    const event = events[Math.floor(Math.random() * events.length)];
    const panel = document.getElementById("eventPanel");
    panel.innerHTML = `
      ${event.text}<br/>
      <button class="btn" onclick="resolveEvent(${event.effects[0]})">${event.options[0]}</button>
      <button class="btn" onclick="resolveEvent(${event.effects[1]})">${event.options[1]}</button>
    `;
  }

  function resolveEvent(effect) {
    mood += effect;
    if (mood > 10) mood = 10;
    if (mood < 0) mood = 0;

    document.getElementById("mood").textContent = getMoodEmoji();

    const panel = document.getElementById("eventPanel");
    panel.innerHTML = "ğŸ¶ ê°•ì•„ì§€ê°€ ë°˜ì‘ì„ ë³´ì˜€ì–´ìš”!";
    setTimeout(() => {
      panel.innerHTML = "";
      inEvent = false;
      startEventLoop();
      ageTimer = setInterval(() => {
        age++;
        updateDogInfo();
        updateGrowthStage();
      }, 20000);
    }, 2000);
  }

  function triggerEvent(type) {
    if (inEvent) return;

    inEvent = true;
    clearInterval(ageTimer);
    clearInterval(eventTimer);

    const panel = document.getElementById("eventPanel");
    let text = "";
    let change = 0;

    if (type === "pet") {
      text = "ê°•ì•„ì§€ë¥¼ ì“°ë‹¤ë“¬ì—ˆì–´ìš”. ê¸°ë¶„ì´ ì¢‹ì•„ì¡Œì–´ìš”!";
      change = 1;
      dogWagTail();
    } else if (type === "feed") {
      text = "ê°•ì•„ì§€ê°€ ë§›ìˆê²Œ ê°„ì‹ì„ ë¨¹ì—ˆì–´ìš”!";
      change = 2;
    } else if (type === "walk") {
      text = "ì‚°ì±…ì„ ë‹¤ë…€ì™”ì–´ìš”. ê¸°ë¶„ì´ í•œê²° ì¢‹ì•„ë³´ì—¬ìš”!";
      change = 2;
    }

    mood += change;
    if (mood > 10) mood = 10;

    document.getElementById("mood").textContent = getMoodEmoji();
    panel.innerHTML = text;

    setTimeout(() => {
      panel.innerHTML = "";
      inEvent = false;
      startEventLoop();
      ageTimer = setInterval(() => {
        age++;
        updateDogInfo();
        updateGrowthStage();
      }, 20000);
    }, 2000);
  }

  function getMoodEmoji() {
    if (mood >= 8) return "ğŸ¥°";
    if (mood >= 5) return "ğŸ˜Š";
    if (mood >= 3) return "ğŸ˜";
    return "ğŸ˜¢";
  }

  function dogWagTail() {
    const img = document.getElementById("dogImage");
    img.style.transition = "transform 0.1s";
    img.style.transform = "rotate(5deg)";
    setTimeout(() => img.style.transform = "rotate(-5deg)", 100);
    setTimeout(() => img.style.transform = "rotate(0deg)", 200);
  }

  function endGame() {
    clearInterval(ageTimer);
    clearInterval(eventTimer);

    document.getElementById("gameScreen").style.display = "none";
    document.getElementById("albumScreen").style.display = "flex";
    document.getElementById("albumMessage").innerText = `ğŸ‰ ${dogName}ì´ê°€ ì˜ˆì˜ê³  ë©‹ì§€ê²Œ ìëì–´ìš”!`;
    document.getElementById("finalDogImage").src = dogImages[selectedBreed]["old"];
  }
</script>
</body>
</html>
